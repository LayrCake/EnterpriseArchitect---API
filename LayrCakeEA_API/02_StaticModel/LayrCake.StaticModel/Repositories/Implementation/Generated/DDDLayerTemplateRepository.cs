/*------------------------------------------------------------------------------
<auto-generated>
     This code was generated by a tool.
	    Code originates from EA Uml ClassTemplate.t4
     Changes to this file will be lost if the code is regenerated.
	    Code Generated Date: 	11 June 2018
	    ProjectModel: 			LayrCake
	    Requested Namespace:	Model$2. Hosting Model$LayrCake.StaticModel$LayrCake$StaticModel$ViewModelObjects$Implementation
</auto-generated>
------------------------------------------------------------------------------*/
using System;
using System.Collections.Generic;
using LayrCake.StaticModel.Repositories.Abstract;
using LayrCake.StaticModel.StaticModelReserved;
using LayrCake.StaticModel.Criteria.Implementation;
using LayrCake.StaticModel.ViewModelObjects.Implementation;
using LayrCake.StaticModel.DataVisualiserServiceReference;
using IVwmCriteria = LayrCake.StaticModel.Criteria.IVwmCriteria;
using StaticModel.Repositories;
using System.Linq;
using Mapper = LayrCake.StaticModel.ModelMapper.Mapper;

namespace LayrCake.StaticModel.Repositories.Implementation
{
    public partial class DDDLayerTemplateRepository : RepositoryBase, IDDDLayerTemplateRepository
    {
        public List<DDDLayerTemplateVwm> GetList(IVwmCriteria criterion = null) //Criterion
        {
            var request = new DDDLayerTemplateRequest().Prepare();
			var dDDLayerTemplateVwmList = new List<DDDLayerTemplateVwm>();
            request.LoadOptions = ServiceLoadOptions.List;
            request.Action = PersistType.Read;
            if (criterion != null)
            {
			    request.Criteria = Mapper.FromViewModelCriteria((DDDLayerTemplateVwmCriteria)criterion);
            }

            var response = Client.GetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplates != null && response.DDDLayerTemplates.Length > 0)
            {
                foreach (var dDDLayerTemplate in response.DDDLayerTemplates)
                    dDDLayerTemplateVwmList.Add(Mapper.ToViewModelObject(dDDLayerTemplate));
                //dDDLayerTemplateVwmList.AddRange(response.DDDLayerTemplates.ToList().Select(x => Mapper.ToViewModelObject(x)));
                return dDDLayerTemplateVwmList;
            }
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return new List<DDDLayerTemplateVwm>();
        }

		public IQueryable<DDDLayerTemplateVwm> GetListQuery(IVwmCriteria criterion = null)
        {
            return GetList(criterion).AsQueryable();
        }

        public DDDLayerTemplateVwm Get(int id)
        {
            var request = new DDDLayerTemplateRequest().Prepare();
            request.Action = PersistType.Read;
            request.LoadOptions = ServiceLoadOptions.Single;
            request.GetByPrimaryKey = id;

            var response = Client.GetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplate != null && response.DDDLayerTemplate.DDDLayerTemplateID == id)
                return Mapper.ToViewModelObject(response.DDDLayerTemplate);
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }

		public DDDLayerTemplateVwm Get(IVwmCriteria criterion = null)
        {
            var request = new DDDLayerTemplateRequest().Prepare();
            request.Action = PersistType.Read;
            request.LoadOptions = ServiceLoadOptions.Single;

			if (criterion != null)
            {
			    request.Criteria = Mapper.FromViewModelCriteria((DDDLayerTemplateVwmCriteria)criterion);
            }

            var response = Client.GetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplate != null)
                return Mapper.ToViewModelObject(response.DDDLayerTemplate);
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }

        public int GetCount(IVwmCriteria criterion = null)
        {
            return GetList(criterion).Count;
        }

        public DDDLayerTemplateVwm Insert(DDDLayerTemplateVwm viewModelObj)
        {
            var request = new DDDLayerTemplateRequest().Prepare();
            request.Action = PersistType.Insert;
            request.DDDLayerTemplate = Mapper.FromViewModelObject(viewModelObj);

            var response = Client.SetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplate != null && response.DDDLayerTemplate.DDDLayerTemplateID > 0)
                return Mapper.ToViewModelObject(response.DDDLayerTemplate);
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }

        public DDDLayerTemplateVwm Update(DDDLayerTemplateVwm viewModelObj)
        {
            var request = new DDDLayerTemplateRequest().Prepare();

            request.Action = PersistType.Update;
            request.DDDLayerTemplate = Mapper.FromViewModelObject(viewModelObj);

            var response = Client.SetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplate != null && response.DDDLayerTemplate.DDDLayerTemplateID > 0)
                return Mapper.ToViewModelObject(response.DDDLayerTemplate);
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }

		/// <summary>
        /// Updates all records based upon an Where Statement Criteria
        /// </summary>
        /// <param name="viewModelObj"></param>
        /// <returns></returns>
		public List<DDDLayerTemplateVwm> Update(IVwmCriteria criterion = null)
        {
            var request = new DDDLayerTemplateRequest().Prepare();
            var dDDLayerTemplateVwmList = new List<DDDLayerTemplateVwm>();

            request.Action = PersistType.Update;

			if (criterion != null)
            {
			    request.Criteria = Mapper.FromViewModelCriteria((DDDLayerTemplateVwmCriteria)criterion);
            }

            var response = Client.SetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplates != null && response.DDDLayerTemplates.Length > 0)
            {
                foreach (var dDDLayerTemplate in response.DDDLayerTemplates)
                    dDDLayerTemplateVwmList.Add(Mapper.ToViewModelObject(dDDLayerTemplate));
                //dDDLayerTemplateVwmList.AddRange(response.DDDLayerTemplates.ToList().Select(x => Mapper.ToViewModelObject(x)));
                return dDDLayerTemplateVwmList;
            }
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return new List<DDDLayerTemplateVwm>();
        }


        public DDDLayerTemplateVwm Delete(int id)
        {
            var request = new DDDLayerTemplateRequest().Prepare();

            request.Action = PersistType.Delete;
            request.DDDLayerTemplate = new DDDLayerTemplate() { DDDLayerTemplateID = id };
			//request.Criteria = new DDDLayerTemplateCriteria() { DDDLayerTemplateID = id };

            var response = Client.SetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplate != null && response.DDDLayerTemplate.DDDLayerTemplateID == id)
                return Mapper.ToViewModelObject(response.DDDLayerTemplate);
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }

        public DDDLayerTemplateVwm Delete(DDDLayerTemplateVwm viewModelObj)
        {
            var request = new DDDLayerTemplateRequest().Prepare();

            request.Action = PersistType.Delete;
            request.DDDLayerTemplate = Mapper.FromViewModelObject(viewModelObj);

            var response = Client.SetDDDLayerTemplates(request);
            Correlate(request, response);

            if (response.DDDLayerTemplate != null && response.DDDLayerTemplate.DDDLayerTemplateID > 0 && response.DDDLayerTemplate.DDDLayerTemplateID == viewModelObj.DDDLayerTemplateID)
                return Mapper.ToViewModelObject(response.DDDLayerTemplate);
            else if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }

        /// <summary>
        /// Deletes all records based upon an Where Statement Criteria
        /// </summary>
        /// <param name="viewModelObj"></param>
        /// <returns></returns>
		public DDDLayerTemplateVwm Delete(IVwmCriteria criterion = null)
        {
            var request = new DDDLayerTemplateRequest().Prepare();

            request.Action = PersistType.Delete;

			if (criterion != null)
            {
			    request.Criteria = Mapper.FromViewModelCriteria((DDDLayerTemplateVwmCriteria)criterion);
            }

            var response = Client.SetDDDLayerTemplates(request);
            Correlate(request, response);

			if (!string.IsNullOrEmpty(response.Message)) throw new Exception(response.Message);
            return null;
        }
	}
}

